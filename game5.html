<!DOCTYPE html>
<html>
<head>
    <title>–ü–∞–∑–ª</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            padding: 20px;
            margin: 0;
            min-height: 100vh;
        }
        .game-container {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            max-width: 800px;
            margin: 0 auto;
        }
        .puzzle-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 2px;
            margin: 20px auto;
            width: 306px;
            height: 306px;
            border: 2px solid #333;
        }
        .puzzle-piece {
            width: 100px;
            height: 100px;
            background-size: 300px 300px;
            border: 1px solid #ddd;
            cursor: pointer;
            transition: transform 0.3s;
        }
        .puzzle-piece:hover {
            transform: scale(1.05);
        }
        .controls {
            margin: 20px 0;
        }
        button {
            padding: 12px 25px;
            margin: 10px;
            border: none;
            border-radius: 8px;
            background: #00b894;
            color: white;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
        }
        button:hover {
            background: #00a085;
        }
        .message {
            font-size: 18px;
            font-weight: bold;
            margin: 20px 0;
            min-height: 30px;
            color: #2d3436;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üß© –ü–∞–∑–ª</h1>
        <div class="message" id="message">–°–æ–±–µ—Ä–∏—Ç–µ –ø–∞–∑–ª!</div>
        <div class="puzzle-container" id="puzzleContainer"></div>
        <div class="controls">
            <button onclick="shufflePuzzle()">–ü–µ—Ä–µ–º–µ—à–∞—Ç—å</button>
            <button onclick="solvePuzzle()">–†–µ—à–∏—Ç—å</button>
        </div>
        <div>–•–æ–¥—ã: <span id="moves">0</span></div>
    </div>

    <script>
        const puzzleContainer = document.getElementById('puzzleContainer');
        let moves = 0;
        let emptyPos = {row: 2, col: 2};

        function createPuzzle() {
            puzzleContainer.innerHTML = '';
            
            for (let row = 0; row < 3; row++) {
                for (let col = 0; col < 3; col++) {
                    if (row === 2 && col === 2) continue;
                    
                    const piece = document.createElement('div');
                    piece.className = 'puzzle-piece';
                    piece.style.backgroundImage = 'url("https://picsum.photos/300")';
                    piece.style.backgroundPosition = `-${col * 100}px -${row * 100}px`;
                    piece.dataset.row = row;
                    piece.dataset.col = col;
                    piece.dataset.correctRow = row;
                    piece.dataset.correctCol = col;
                    
                    piece.onclick = () => movePiece(row, col);
                    puzzleContainer.appendChild(piece);
                }
            }
            
            updateMoves();
        }

        function movePiece(row, col) {
            const isAdjacent = 
                (Math.abs(row - emptyPos.row) === 1 && col === emptyPos.col) ||
                (Math.abs(col - emptyPos.col) === 1 && row === emptyPos.row);
            
            if (isAdjacent) {
                const piece = document.querySelector(`[data-row="${row}"][data-col="${col}"]`);
                piece.dataset.row = emptyPos.row;
                piece.dataset.col = emptyPos.col;
                
                emptyPos = {row, col};
                moves++;
                updateMoves();
                checkWin();
            }
        }

        function shufflePuzzle() {
            for (let i = 0; i < 100; i++) {
                const directions = [
                    {row: -1, col: 0}, {row: 1, col: 0},
                    {row: 0, col: -1}, {row: 0, col: 1}
                ];
                
                const validMoves = directions.filter(dir => {
                    const newRow = emptyPos.row + dir.row;
                    const newCol = emptyPos.col + dir.col;
                    return newRow >= 0 && newRow < 3 && newCol >= 0 && newCol < 3;
                });
                
                const move = validMoves[Math.floor(Math.random() * validMoves.length)];
                const pieceRow = emptyPos.row + move.row;
                const pieceCol = emptyPos.col + move.col;
                
                movePiece(pieceRow, pieceCol);
            }
            moves = 0;
            updateMoves();
            document.getElementById('message').textContent = '–°–æ–±–µ—Ä–∏—Ç–µ –ø–∞–∑–ª!';
        }

        function solvePuzzle() {
            emptyPos = {row: 2, col: 2};
            createPuzzle();
            moves = 0;
            updateMoves();
            document.getElementById('message').textContent = '–ü–∞–∑–ª —Å–æ–±—Ä–∞–Ω!';
        }

        function checkWin() {
            const pieces = document.querySelectorAll('.puzzle-piece');
            let solved = true;
            
            pieces.forEach(piece => {
                if (piece.dataset.row !== piece.dataset.correctRow || 
                    piece.dataset.col !== piece.dataset.correctCol) {
                    solved = false;
                }
            });
            
            if (solved && emptyPos.row === 2 && emptyPos.col === 2) {
                document.getElementById('message').textContent = 'üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã —Å–æ–±—Ä–∞–ª–∏ –ø–∞–∑–ª!';
            }
        }

        function updateMoves() {
            document.getElementById('moves').textContent = moves;
        }

        createPuzzle();
    </script>
</body>
</html>